<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizzeria Website Builder</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .section-preview {
            transition: all 0.3s ease;
        }
        .drag-handle {
            cursor: move;
        }
        .color-input {
            width: 80px;
            height: 40px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            cursor: pointer;
        }
        .gallery-image {
            transition: transform 0.3s ease;
        }
        .gallery-image:hover {
            transform: scale(1.1);
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app" class="min-h-screen p-4">
        <!-- Header -->
        <div class="max-w-6xl mx-auto">
            <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                <div class="flex justify-between items-center mb-4">
                    <h1 class="text-3xl font-bold text-gray-800">üçï Pizzeria Website Builder</h1>
                    <button onclick="togglePreview()" class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors">
                        üëÅÔ∏è <span id="previewBtnText">Preview</span>
                    </button>
                </div>
                
                <div id="addButtons" class="flex gap-2 flex-wrap">
                    <button onclick="addSection('hero')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        ‚ûï Add Hero Section
                    </button>
                    <button onclick="addSection('about')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        ‚ûï Add About Section
                    </button>
                    <button onclick="addSection('contact')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        ‚ûï Add Contact Section
                    </button>
                    <button onclick="addSection('gallery')" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700">
                        ‚ûï Add Gallery Section
                    </button>
                </div>
            </div>

            <!-- Editor View -->
            <div id="editorView" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <h2 class="text-xl font-semibold mb-4">Edit Sections</h2>
                    <div id="sectionEditors"></div>
                </div>

                <div class="sticky top-4">
                    <h2 class="text-xl font-semibold mb-4">Live Preview</h2>
                    <div class="border rounded-lg overflow-hidden shadow-lg bg-white">
                        <div id="livePreview"></div>
                    </div>
                </div>
            </div>

            <!-- Full Preview View -->
            <div id="previewView" class="hidden">
                <div id="fullPreview"></div>
            </div>
        </div>
    </div>

    <script>
        let sections = [
            {
                id: 1,
                type: 'hero',
                title: 'Authentic Italian Pizza',
                subtitle: 'Made fresh daily with love',
                bgColor: '#dc2626',
                textColor: '#ffffff',
                buttonText: 'Order Now',
                buttonLink: 'https://your-order-link.com',
                image: 'https://images.unsplash.com/photo-1513104890138-7c749659a591?w=1200&h=600&fit=crop'
            },
            {
                id: 2,
                type: 'about',
                title: 'Our Story',
                content: 'Family-owned since 1985, we bring the authentic taste of Naples to your neighborhood.',
                bgColor: '#ffffff',
                textColor: '#1f2937'
            },
            {
                id: 3,
                type: 'contact',
                title: 'Visit Us',
                address: '123 Main Street, Your City',
                phone: '(555) 123-4567',
                hours: 'Mon-Sun: 11am - 10pm',
                bgColor: '#1f2937',
                textColor: '#ffffff'
            }
        ];

        let isPreview = false;

        function renderSection(section, isFullPreview = false) {
            switch (section.type) {
                case 'hero':
                    return `
                        <div style="background-color: ${section.bgColor}; color: ${section.textColor};" class="relative min-h-[500px] flex items-center justify-center overflow-hidden">
                            <div class="absolute inset-0 bg-cover bg-center" style="background-image: url(${section.image})">
                                <div class="absolute inset-0 bg-black bg-opacity-40"></div>
                            </div>
                            <div class="relative z-10 text-center px-4 max-w-4xl mx-auto">
                                <h1 class="text-5xl md:text-7xl font-bold mb-4" style="color: ${section.textColor}">
                                    ${section.title}
                                </h1>
                                <p class="text-xl md:text-2xl mb-8" style="color: ${section.textColor}">
                                    ${section.subtitle}
                                </p>
                                <a href="${isFullPreview ? section.buttonLink : '#'}" 
                                   ${isFullPreview ? 'target="_blank" rel="noopener noreferrer"' : ''}
                                   class="inline-block px-8 py-4 text-lg font-semibold rounded-full transition-transform hover:scale-105"
                                   style="background-color: ${section.textColor}; color: ${section.bgColor}">
                                    ${section.buttonText}
                                </a>
                            </div>
                        </div>
                    `;

                case 'about':
                    return `
                        <div style="background-color: ${section.bgColor}; color: ${section.textColor};" class="py-20 px-4">
                            <div class="max-w-3xl mx-auto text-center">
                                <h2 class="text-4xl font-bold mb-6">${section.title}</h2>
                                <p class="text-lg leading-relaxed">${section.content}</p>
                            </div>
                        </div>
                    `;

                case 'contact':
                    return `
                        <div style="background-color: ${section.bgColor}; color: ${section.textColor};" class="py-20 px-4">
                            <div class="max-w-3xl mx-auto text-center">
                                <h2 class="text-4xl font-bold mb-8">${section.title}</h2>
                                <div class="space-y-4 text-lg">
                                    <p class="font-semibold">${section.address}</p>
                                    <p>${section.phone}</p>
                                    <p>${section.hours}</p>
                                </div>
                            </div>
                        </div>
                    `;

                case 'gallery':
                    return `
                        <div style="background-color: ${section.bgColor}; color: ${section.textColor};" class="py-20 px-4">
                            <div class="max-w-6xl mx-auto">
                                <h2 class="text-4xl font-bold mb-12 text-center">${section.title}</h2>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    ${section.images.map((img, i) => `
                                        <div class="aspect-square rounded-lg overflow-hidden shadow-lg">
                                            <img src="${img}" alt="Gallery ${i + 1}" class="w-full h-full object-cover gallery-image" />
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
            }
        }

        function renderEditor(section, index) {
            const heroFields = section.type === 'hero' ? `
                <div>
                    <label class="block text-sm font-medium mb-1">Subtitle</label>
                    <input type="text" value="${section.subtitle}" 
                           onchange="updateSection(${section.id}, 'subtitle', this.value)"
                           class="w-full px-3 py-2 border rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Background Image URL</label>
                    <input type="text" value="${section.image}" 
                           onchange="updateSection(${section.id}, 'image', this.value)"
                           class="w-full px-3 py-2 border rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Button Text</label>
                    <input type="text" value="${section.buttonText}" 
                           onchange="updateSection(${section.id}, 'buttonText', this.value)"
                           class="w-full px-3 py-2 border rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Order Link (URL)</label>
                    <input type="url" value="${section.buttonLink}" 
                           onchange="updateSection(${section.id}, 'buttonLink', this.value)"
                           class="w-full px-3 py-2 border rounded"
                           placeholder="https://your-order-system.com">
                </div>
            ` : '';

            const aboutFields = section.type === 'about' ? `
                <div>
                    <label class="block text-sm font-medium mb-1">Content</label>
                    <textarea onchange="updateSection(${section.id}, 'content', this.value)"
                              class="w-full px-3 py-2 border rounded" rows="4">${section.content}</textarea>
                </div>
            ` : '';

            const contactFields = section.type === 'contact' ? `
                <div>
                    <label class="block text-sm font-medium mb-1">Address</label>
                    <input type="text" value="${section.address}" 
                           onchange="updateSection(${section.id}, 'address', this.value)"
                           class="w-full px-3 py-2 border rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Phone</label>
                    <input type="text" value="${section.phone}" 
                           onchange="updateSection(${section.id}, 'phone', this.value)"
                           class="w-full px-3 py-2 border rounded">
                </div>
                <div>
                    <label class="block text-sm font-medium mb-1">Hours</label>
                    <input type="text" value="${section.hours}" 
                           onchange="updateSection(${section.id}, 'hours', this.value)"
                           class="w-full px-3 py-2 border rounded">
                </div>
            ` : '';

            const galleryFields = section.type === 'gallery' ? `
                <div>
                    <label class="block text-sm font-medium mb-1">Image URLs (one per line)</label>
                    <textarea onchange="updateSection(${section.id}, 'images', this.value.split('\\n').filter(url => url.trim()))"
                              class="w-full px-3 py-2 border rounded" rows="4"
                              placeholder="https://image1.jpg&#10;https://image2.jpg">${section.images ? section.images.join('\n') : ''}</textarea>
                </div>
            ` : '';

            return `
                <div class="bg-white rounded-lg shadow-md p-6 mb-4">
                    <div class="flex justify-between items-center mb-4">
                        <h3 class="text-lg font-semibold capitalize">${section.type} Section</h3>
                        <div class="flex gap-2">
                            <button onclick="moveSection(${section.id}, 'up')" 
                                    ${index === 0 ? 'disabled class="p-2 bg-gray-100 rounded opacity-50"' : 'class="p-2 hover:bg-gray-100 rounded"'}>
                                ‚¨ÜÔ∏è
                            </button>
                            <button onclick="moveSection(${section.id}, 'down')" 
                                    ${index === sections.length - 1 ? 'disabled class="p-2 bg-gray-100 rounded opacity-50"' : 'class="p-2 hover:bg-gray-100 rounded"'}>
                                ‚¨áÔ∏è
                            </button>
                            <button onclick="deleteSection(${section.id})" 
                                    class="p-2 hover:bg-red-100 text-red-600 rounded">
                                üóëÔ∏è
                            </button>
                        </div>
                    </div>

                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium mb-1">Background Color</label>
                            <input type="color" value="${section.bgColor}" 
                                   onchange="updateSection(${section.id}, 'bgColor', this.value)"
                                   class="color-input">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">Text Color</label>
                            <input type="color" value="${section.textColor}" 
                                   onchange="updateSection(${section.id}, 'textColor', this.value)"
                                   class="color-input">
                        </div>

                        <div>
                            <label class="block text-sm font-medium mb-1">Title</label>
                            <input type="text" value="${section.title}" 
                                   onchange="updateSection(${section.id}, 'title', this.value)"
                                   class="w-full px-3 py-2 border rounded">
                        </div>

                        ${heroFields}
                        ${aboutFields}
                        ${contactFields}
                        ${galleryFields}
                    </div>
                </div>
            `;
        }

        function updateSection(id, field, value) {
            sections = sections.map(s => s.id === id ? { ...s, [field]: value } : s);
            render();
        }

        function deleteSection(id) {
            if (confirm('Are you sure you want to delete this section?')) {
                sections = sections.filter(s => s.id !== id);
                render();
            }
        }

        function moveSection(id, direction) {
            const index = sections.findIndex(s => s.id === id);
            if ((direction === 'up' && index === 0) || (direction === 'down' && index === sections.length - 1)) return;
            
            const newIndex = direction === 'up' ? index - 1 : index + 1;
            [sections[index], sections[newIndex]] = [sections[newIndex], sections[index]];
            render();
        }

        function addSection(type) {
            const newSection = {
                id: Date.now(),
                type,
                title: type === 'hero' ? 'New Hero Section' : type === 'about' ? 'About Us' : type === 'contact' ? 'Contact' : 'Gallery',
                bgColor: '#ffffff',
                textColor: '#1f2937'
            };

            if (type === 'hero') {
                newSection.subtitle = 'Your subtitle here';
                newSection.buttonText = 'Order Now';
                newSection.buttonLink = 'https://';
                newSection.image = 'https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?w=1200&h=600&fit=crop';
            } else if (type === 'about') {
                newSection.content = 'Tell your story here...';
            } else if (type === 'contact') {
                newSection.address = 'Your address';
                newSection.phone = 'Your phone';
                newSection.hours = 'Your hours';
            } else if (type === 'gallery') {
                newSection.images = [
                    'https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=400&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1574071318508-1cdbab80d002?w=400&h=400&fit=crop',
                    'https://images.unsplash.com/photo-1595854341625-f33ee10dbf94?w=400&h=400&fit=crop'
                ];
            }

            sections.push(newSection);
            render();
        }

        function togglePreview() {
            isPreview = !isPreview;
            document.getElementById('editorView').classList.toggle('hidden');
            document.getElementById('previewView').classList.toggle('hidden');
            document.getElementById('addButtons').classList.toggle('hidden');
            document.getElementById('previewBtnText').textContent = isPreview ? 'Back to Editor' : 'Preview';
            
            if (isPreview) {
                document.getElementById('fullPreview').innerHTML = sections.map(s => renderSection(s, true)).join('');
            }
        }

        function render() {
            document.getElementById('sectionEditors').innerHTML = sections.map((s, i) => renderEditor(s, i)).join('');
            document.getElementById('livePreview').innerHTML = sections.map(s => renderSection(s)).join('');
        }

        render();
    </script>
</body>
</html>